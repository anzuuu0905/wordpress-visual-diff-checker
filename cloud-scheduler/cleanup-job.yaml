# Cloud Scheduler job configuration for automatic cleanup
# Deploy with: gcloud scheduler jobs create http cleanup-old-data --schedule="0 2 * * *" --uri=https://asia-northeast1-PROJECT_ID.cloudfunctions.net/cleanupOldData --http-method=GET

name: cleanup-old-data
description: "Daily cleanup of old VRT data (screenshots and Firestore records)"
schedule: "0 2 * * *"  # Every day at 2:00 AM JST
timeZone: "Asia/Tokyo"

httpTarget:
  uri: https://asia-northeast1-PROJECT_ID.cloudfunctions.net/cleanupOldData
  httpMethod: GET
  headers:
    Content-Type: application/json
  
  # For authenticated access, uncomment and configure:
  # oidcToken:
  #   serviceAccountEmail: vrt-runner@PROJECT_ID.iam.gserviceaccount.com

retryConfig:
  retryCount: 3
  maxRetryDuration: 1800s  # 30 minutes
  minBackoffDuration: 300s  # 5 minutes
  maxBackoffDuration: 3600s  # 1 hour

attemptDeadline: 1800s  # 30 minutes timeout